# *************************************************************************************
# *************************************************************************************
#
#		Name : 		buildtrack.py
#		Author :	Paul Robson (paul@robsons.org.uk)
#		Purpose : 	Track builds
#		Date :		8th February 2020
#
# *************************************************************************************
# *************************************************************************************

import sys,os,re
from datetime import *

# *************************************************************************************
#									Get build count
# *************************************************************************************

h = open("build.count")
buildID = int(h.readlines()[0])
h.close()

# *************************************************************************************
#								 Update build count
# *************************************************************************************

h = open("build.count","w")
h.write(str(buildID+1)+"\n")
h.close()

# *************************************************************************************
#								Output build text
# *************************************************************************************

today = datetime.now()
s = "Build:{0} ({1})".format(buildID,today.strftime("%d-%b-%y %H:%M"))
print(s)
h = open(".."+os.sep+"generated"+os.sep+"buildinfo.inc","w")
h.write('\t.text\t"{0}"\n'.format(s))
h.close()
